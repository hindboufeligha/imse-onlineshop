{% include 'includes/header.html' %}


<!-- ***** Main Banner Area Start ***** -->
<div class="page-heading" id="top">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="inner-content">
                    <h2>Check the most popular products</h2>
                    <span>Awesome and creative designs from our designers.</span>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ***** Main Banner Area End ***** -->

<!-- ***** Products Area Starts ***** -->
<section class="section" id="products">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="section-heading">
                    <h2>Our Latest Popular Products</h2>
                    <!--<span>Check out all of our products.</span>-->
                </div>
            </div>
        </div>
    </div>
    
    {% set categories = {
        'Jeans': toprated_products,
        'Jackets & Coats': toprated_products,
        'Shirts': toprated_products,
        'Accessories': toprated_products,
        'Bags': toprated_products,
        'Boots': toprated_products,
        'Clothing': toprated_products,
        'Hoodies': toprated_products,
        'Jewellery': toprated_products,
        'Pyjamas': toprated_products,
        'Shoes': toprated_products,
        'Sneakers': toprated_products
    } %}
    
    {% for category, products in categories.items() %}
    <section class="section" id="{{ category|lower }}">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="section-heading">
                        <h2>{{ category }}</h2>
                        <span>Details to details is what makes ONLINESHOP different from other brands.</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="men-item-carousel">
                        <div class="owl-men-item owl-carousel">
                            {% for product_data in products %}
                            <div class="item">
                                <div class="thumb">
                                    <!-- Render product details here -->
                                    <img src="{{ product_data.product_image_url }}" alt="{{ product_data.product_name }}">
                                </div>
                                <div class="down-content">
                                    <h4>{{ product_data.product_name }}</h4>
                                    <span>${{ product_data.product_price }}</span>
                                    <ul class="stars">
                                        <!-- Render stars based on product's average rating -->
                                        {% set int_rating = product_data.average_rating | default(0) | round | int %}
                                        {% for _ in range(int_rating) %}
                                        <li><i class="fa fa-star"></i></li>
                                        {% endfor %}
                                        {% for _ in range(5 - int_rating) %}
                                        <li><i class="fa fa-star-o"></i></li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    {% endfor %}
    
    
    {% include 'includes/footer.html' %}
    